# Requirements Archive: v2.1 Production Bootstrap

**Archived:** 2026-03-01
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Qualifai

**Defined:** 2026-02-23
**Core Value:** Every outreach message is backed by real evidence, matched to a service Klarifai actually delivers.

## v2.1 Requirements

Requirements for Production Bootstrap milestone. Each maps to roadmap phases.

### Use Case Population

- [x] **SEED-01**: Admin can import use cases from Obsidian vault — reads project markdown files, extracts service capabilities, creates UseCase records with dedup
- [x] **SEED-02**: Admin can extract use cases from a project codebase — analyzes source files via AI, generates capability descriptions, creates UseCase records
- [x] **SEED-03**: Klarifai service catalog is populated with all relevant offerings from vault + codebases

### Prospect Seeding

- [x] **DISC-01**: Admin imports 5+ real target companies using existing import functionality
- [x] **DISC-02**: Admin discovers and imports new prospects via Apollo sector/location search

### Pipeline Validation

- [x] **PIPE-01**: Research pipeline runs successfully on real company websites
- [x] **PIPE-02**: API failures (crawl timeouts, SerpAPI rate limits, KvK errors) surface user-visible error messages instead of silent failures
- [x] **PIPE-03**: Evidence extraction produces relevant hypotheses for real marketing agencies

### Quality Calibration

- [x] **QUAL-01**: Amber/green quality thresholds are calibrated using real research results
- [x] **QUAL-02**: List-view traffic light accuracy improved (resolve hardcoded approximate values)

### End-to-End Cycle

- [x] **E2E-01**: Admin sends real outreach email via the send queue to a real prospect
- [x] **E2E-02**: Reply webhooks correctly receive and triage real email responses
- [x] **E2E-03**: Cal.com booking triggers automatic meeting brief generation

## v2.2 Requirements

Requirements for Verified Pain Intelligence milestone. Focus: better evidence acquisition and stricter outreach gating.

### Source Discovery

- [ ] **VPI-01**: System discovers candidate URLs per prospect from Google + sitemap + manual seeds for reviews, jobs, docs/help, and main pages
- [ ] **VPI-02**: Discovered sources are deduplicated and stored with provenance metadata (google/sitemap/manual)

### Browser Extraction

- [ ] **VPI-03**: JS-rendered pages are extracted via browser automation (Playwright/Crawl4AI-compatible flow), not fetch-only fallback
- [ ] **VPI-04**: Each extracted evidence record includes source URL, source type, snippet/quote, extraction timestamp, and extraction status

### Pain Confirmation Gate

- [ ] **VPI-05**: Outreach drafts require minimum pain-confirmation thresholds across sources (reviews/jobs/site context)
- [ ] **VPI-06**: When thresholds fail, queue shows explicit missing-evidence reasons; override requires reason + audit metadata

## Future Requirements

### Scaling

- **SCALE-01**: Bulk research — kick off research on multiple prospects at once
- **SCALE-02**: Use case extractor as self-service feature (non-admin can suggest use cases)
- **SCALE-03**: Deployment to hosted environment (not just localhost)

## Out of Scope

| Feature                    | Reason                                                              |
| -------------------------- | ------------------------------------------------------------------- |
| Bulk research runs         | One-at-a-time is fine at current volumes (5-10 prospects)           |
| Deployment/hosting         | User is fine with localhost for now                                 |
| New evidence sources       | Pipeline has 4 sources beyond homepage; validate before adding more |
| Auto-send without approval | Trust not yet calibrated; milestone is about proving the loop       |

## Traceability

| Requirement | Phase                                   | Status   |
| ----------- | --------------------------------------- | -------- |
| SEED-01     | Phase 23 — Use Case Extractors          | Complete |
| SEED-02     | Phase 23 — Use Case Extractors          | Complete |
| SEED-03     | Phase 24 — Data Population              | Complete |
| DISC-01     | Phase 24 — Data Population              | Complete |
| DISC-02     | Phase 24 — Data Population              | Complete |
| PIPE-01     | Phase 25 — Pipeline Hardening           | Complete |
| PIPE-02     | Phase 25 — Pipeline Hardening           | Complete |
| PIPE-03     | Phase 25 — Pipeline Hardening           | Complete |
| QUAL-01     | Phase 26 — Quality Calibration          | Complete |
| QUAL-02     | Phase 26 — Quality Calibration          | Complete |
| E2E-01      | Phase 27 — End-to-End Cycle             | Complete |
| E2E-02      | Phase 27 — End-to-End Cycle             | Complete |
| E2E-03      | Phase 27.1 — Cal.com Booking Validation | Complete |
| VPI-01      | Phase 28 — Source Discovery             | Pending  |
| VPI-02      | Phase 28 — Source Discovery             | Pending  |
| VPI-03      | Phase 29 — Browser Extraction           | Pending  |
| VPI-04      | Phase 29 — Browser Extraction           | Pending  |
| VPI-05      | Phase 30 — Pain Gate                    | Pending  |
| VPI-06      | Phase 30 — Pain Gate                    | Pending  |

**Coverage:**

- v2.1 requirements: 13 total
- Mapped to phases: 13
- Unmapped: 0
- v2.2 requirements: 6 total
- Mapped to phases: 6
- Unmapped: 0

---

_Requirements defined: 2026-02-23_
_Last updated: 2026-03-01 after v2.1 audit — E2E-03 reset to Pending, reassigned to Phase 27.1_
